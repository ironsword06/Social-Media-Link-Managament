<p-dialog
  header="User Info"
  [(visible)]="visible"
  [modal]="true"
  [closable]="true"
  (onHide)="onCancel()"
>
<ng-container *ngIf="!isEditMode; else editTemplate">
  <div class="p-fluid">
    <div class="p-field">
      <label for="username">Username:</label>
      <p id="username" class="data">{{ username }}</p>
    </div>

    <div class="p-field">
      <label for="email">Email:</label>
      <p id="email" class="data">{{ email }}</p>
    </div>

    <div class="p-dialog-footer">
      <button pButton type="button" label="Cancel" icon="pi pi-times" (click)="onCancel()"></button>
      <button pButton type="button" label="Edit" icon="pi pi-user-edit" (click)="onEdit()"></button>
      <button pButton type="button" label="Delete" icon="pi pi-trash" (click)="onDelete()" class="p-button-danger"></button>
    </div>
  </div>
  </ng-container>

  <ng-template #editTemplate>
    <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
      <div class="p-fluid">
        <div class="p-field">
          <label for="username">Username</label>
          <input id="username" pInputText formControlName="username" />
          <small *ngIf="usernameControl.invalid && usernameControl.touched">
            Username is required.
          </small>
        </div>

        <div class="p-field">
          <label for="email">Email</label>
          <input id="email" pInputText formControlName="email" />
          <small *ngIf="emailControl.invalid && emailControl.touched">
            Please enter a valid email.
          </small>
        </div>

        <div class="p-dialog-footer">
          <button pButton type="button" label="Cancel" icon="pi pi-times" (click)="onCancelEdit()"></button>
          <button pButton type="submit" label="Submit" icon="pi pi-check" [disabled]="editForm.invalid"></button>
        </div>
      </div>
    </form>
  </ng-template>
</p-dialog>
